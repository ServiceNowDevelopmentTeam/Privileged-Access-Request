<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="catalog_script_client">
    <catalog_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_catalog>true</applies_catalog>
        <applies_extended>false</applies_extended>
        <applies_req_item>true</applies_req_item>
        <applies_sc_task>true</applies_sc_task>
        <applies_target_record>true</applies_target_record>
        <applies_to>set</applies_to>
        <cat_item/>
        <cat_variable>IO:6680d3441ba274108c5143f3cc4bcb39</cat_variable>
        <condition/>
        <description/>
        <field/>
        <global>true</global>
        <isolate_script>false</isolate_script>
        <messages/>
        <name>Get Requested For's Info and Autofill</name>
        <order>10000</order>
        <script><![CDATA[function onChange(control, oldValue, newValue, isLoading) {
    if (isLoading || newValue == '') {
        return;
    }

    //Type appropriate comment here, and begin script below
    var reqFor = g_form.getReference('requested_for', populateDeptDetails);

    function populateDeptDetails(reqFor) {
        //ensure that a record exists, then set the value correctly and set permissions correctly
        //if no record exists, then empty the value correctly and set permissions correctly
		if(reqFor.company != ''){
			g_form.setValue('user_company', reqFor.company);
		} else{
			g_form.setValue('user_company', '');
		}
		
		if(reqFor.email != ''){
			g_form.setValue('email_address', reqFor.email);
		} else{
			g_form.setValue('email_address', '');
		}
		
		// THIS IS REQUESTED FOR NO REQUESTOR
		/*
		if(reqFor.title != ''){
			g_form.setValue('requestors_title', reqFor.title);
		} else {
			g_form.setValue('requestors_title', '');
		}*/

        //if manager record is not empty
        if (reqFor.manager != '') {
            g_form.setValue('approving_manager', reqFor.manager);
			if(g_form.getValue('manager_read_only') == 'true'){
				g_form.setReadOnly('approving_manager', true);
				g_form.setMandatory('approving_manager', false);
			}
        } else {
            g_form.setValue('approving_manager', '');
            if(g_form.getValue('manager_read_only') == 'true'){
				g_form.setReadOnly('approving_manager', false);
				g_form.setMandatory('approving_manager', true);
			}
        }

        //phone number stuff as well (if its visible!)
	if (g_form.isMandatory('requestors_phone_number') || g_form.getValue('requestors_phone_number') != '') {
        if (reqFor.phone != '') {
            g_form.setValue('requestors_phone_number', reqFor.phone);
            g_form.setReadOnly('requestors_phone_number', true);
            g_form.setMandatory('requestors_phone_number', false);
        } else if (reqFor.mobile_phone != '') {
            g_form.setValue('requestors_phone_number', reqFor.mobile_phone);
            g_form.setReadOnly('requestors_phone_number', true);
            g_form.setMandatory('requestors_phone_number', false);
        } else {
            g_form.setValue('requestors_phone_number', '');
            g_form.setReadOnly('requestors_phone_number', false);
            g_form.setMandatory('requestors_phone_number', true);
        }
    }
}

}]]></script>
        <sys_class_name>catalog_script_client</sys_class_name>
        <sys_created_by>John.Schwab</sys_created_by>
        <sys_created_on>2021-09-07 21:26:39</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>10c19fc41ba274108c5143f3cc4bcba5</sys_id>
        <sys_mod_count>4</sys_mod_count>
        <sys_name>Get Requested For's Info and Autofill</sys_name>
        <sys_overrides/>
        <sys_package display_value="Global" source="global">global</sys_package>
        <sys_policy/>
        <sys_scope display_value="Privileged Access Request">3df572701b7d015062e50ed2cd4bcb4c</sys_scope>
        <sys_update_name>catalog_script_client_10c19fc41ba274108c5143f3cc4bcba5</sys_update_name>
        <sys_updated_by>John.Schwab</sys_updated_by>
        <sys_updated_on>2023-03-28 19:30:57</sys_updated_on>
        <table/>
        <type>onChange</type>
        <ui_type>10</ui_type>
        <variable_set display_value="Requestor Auto Fill Read Only Func">36bf0bc01ba274108c5143f3cc4bcb8b</variable_set>
        <view/>
    </catalog_script_client>
    <sys_claim action="INSERT_OR_UPDATE">
        <claim_owner_scope display_value="Privileged Access Request">3df572701b7d015062e50ed2cd4bcb4c</claim_owner_scope>
        <claim_timestamp>1836700aab60000001</claim_timestamp>
        <metadata_update_name>catalog_script_client_10c19fc41ba274108c5143f3cc4bcba5</metadata_update_name>
        <previous_claim_app_version>1.0.16</previous_claim_app_version>
        <previous_claim_name>Privileged Access Request</previous_claim_name>
        <previous_claim_scope>3df572701b7d015062e50ed2cd4bcb4c</previous_claim_scope>
        <sys_created_by>Terry.Lillo</sys_created_by>
        <sys_created_on>2022-09-22 21:00:40</sys_created_on>
        <sys_id>544840ae1b42995062e50ed2cd4bcbb1</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>Terry.Lillo</sys_updated_by>
        <sys_updated_on>2022-09-29 19:33:53</sys_updated_on>
    </sys_claim>
</record_update>
